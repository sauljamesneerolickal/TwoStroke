{% extends 'users/admin/admin_layout.html' %}
{% block admin_title %}Dashboard{% endblock %}
{% block admin_content %}
<div class="row g-4 mb-5">
    <div class="col-md-3">
        <div class="glass-card text-center border-top border-primary border-4 shadow-sm h-100 py-4">
            <i class="bi bi-people-fill text-primary mb-2 fs-2"></i>
            <h6 class="text-secondary text-uppercase mb-1" style="font-size: 0.7rem; font-weight: 700;">Total Customers
            </h6>
            <h2 class="mb-0 fw-bold text-dark">{{ stats.total_customers }}</h2>
        </div>
    </div>
    <div class="col-md-3">
        <div class="glass-card text-center border-top border-warning border-4 shadow-sm h-100 py-4">
            <i class="bi bi-shop text-warning mb-2 fs-2"></i>
            <h6 class="text-secondary text-uppercase mb-1" style="font-size: 0.7rem; font-weight: 700;">Total Sellers
            </h6>
            <h2 class="mb-0 fw-bold text-dark">{{ stats.total_sellers }}</h2>
        </div>
    </div>
    <div class="col-md-3">
        <div class="glass-card text-center border-top border-success border-4 shadow-sm h-100 py-4">
            <i class="bi bi-currency-dollar text-success mb-2 fs-2"></i>
            <h6 class="text-secondary text-uppercase mb-1" style="font-size: 0.7rem; font-weight: 700;">Total Revenue
            </h6>
            <h2 class="mb-0 fw-bold text-dark">${{ stats.total_revenue|floatformat:2 }}</h2>
        </div>
    </div>
    <div class="col-md-3">
        <div class="glass-card text-center border-top border-danger border-4 shadow-sm h-100 py-4">
            <i class="bi bi-exclamation-triangle text-danger mb-2 fs-2"></i>
            <h6 class="text-secondary text-uppercase mb-1" style="font-size: 0.7rem; font-weight: 700;">Low Stock</h6>
            <h2 class="mb-0 fw-bold text-dark">{{ stats.low_stock_count }}</h2>
        </div>
    </div>
</div>

<div class="glass-card border-0 shadow-sm">
    <h4 class="text-dark mb-4 fw-bold">Recent Transactions</h4>
    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Amount</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for order in recent_orders %}
                <tr>
                    <td class="fw-bold">#{{ order.order_id }}</td>
                    <td>{{ order.full_name }}</td>
                    <td>${{ order.total_paid|floatformat:2 }}</td>
                    <td>
                        <span
                            class="badge {% if order.status == 'delivered' %}bg-success-subtle text-success{% elif order.status == 'cancelled' %}bg-danger-subtle text-danger{% else %}bg-info-subtle text-info{% endif %} px-3 py-2">
                            {{ order.status|upper }}
                        </span>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" class="text-center py-4 text-muted">No recent orders.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="text-center mt-3">
        <a href="{% url 'admin_orders' %}" class="btn btn-link text-primary fw-bold text-decoration-none small">View All
            Orders <i class="bi bi-arrow-right"></i></a>
    </div>
</div>
{% endblock %}