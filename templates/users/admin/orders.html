{% extends 'users/admin/admin_layout.html' %}
{% block admin_title %}Order Management{% endblock %}
{% block admin_content %}
<div class="glass-card mb-5 border-0 shadow-sm">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="text-dark fw-bold mb-0">Total Transactions</h4>
        <div class="d-flex gap-2">
            <input type="text" class="form-control form-control-sm" placeholder="Search orders...">
            <button class="btn btn-outline-secondary btn-sm rounded-pill px-3">Filter</button>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Store/Seller</th>
                    <th>Date</th>
                    <th>Amount</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr>
                    <td class="fw-bold text-primary">#{{ order.order_id }}</td>
                    <td>{{ order.full_name }}</td>
                    <td>{{ order.items.first.product.seller.workshop_name|default:"General Store" }}</td>
                    <td class="small">{{ order.created_at|date:"d M, H:i" }}</td>
                    <td class="fw-bold">${{ order.total_paid|floatformat:2 }}</td>
                    <td>
                        <span
                            class="badge {% if order.status == 'delivered' %}bg-success-subtle text-success{% elif order.status == 'cancelled' %}bg-danger-subtle text-danger{% else %}bg-info-subtle text-info{% endif %} px-3 py-2">
                            {{ order.status|upper }}
                        </span>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center py-5 text-muted">No orders found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}